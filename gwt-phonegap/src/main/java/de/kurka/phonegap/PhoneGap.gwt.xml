<module>
    <inherits name='com.google.gwt.user.User'/>
    <inherits name='de.kurka.gwt.collection.GwtCollections'/>
    
    
        <define-property name="phonegap.env" values="yes, no" />
	<property-provider name="phonegap.env"><![CDATA[
  	{
	    var ua = window.navigator.userAgent.toLowerCase();
	    if (ua.indexOf('android') != -1 || ua.indexOf('ipad') != -1 || ua.indexOf('iphone') != -1 ) 
	    { 
	    	var url = document.location.href;
	    	if(url.indexOf("file://") === 0)
	    	{
	    		return "yes";
	    	}
	    }
	   
	    return 'no';
  	}
]]></property-provider>
    
    <!-- Phonegap -->
     <replace-with class="de.kurka.phonegap.client.PhoneGapStandardImpl">
        <when-type-is class="de.kurka.phonegap.client.PhoneGap"/>
        <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    
    <replace-with class="de.kurka.phonegap.client.PhoneGapBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.PhoneGap"/>
        <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <!-- Accelerometer -->
    <replace-with class="de.kurka.phonegap.client.accelerometer.AccelerometerMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.accelerometer.Accelerometer"/>
        <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.accelerometer.AccelerometerBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.accelerometer.Accelerometer"/>
        <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <!-- Camera -->
    <replace-with class="de.kurka.phonegap.client.camera.CameraMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.camera.Camera"/>
        <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
     <replace-with class="de.kurka.phonegap.client.camera.CameraBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.camera.Camera"/>
        <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <!-- Contacts -->
     <replace-with class="de.kurka.phonegap.client.contacts.js.ContactsJsoImpl">
        <when-type-is class="de.kurka.phonegap.client.contacts.Contacts"/>
    </replace-with>
    
    <!-- Device -->
    <replace-with class="de.kurka.phonegap.client.device.DeviceMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.device.Device"/>
         <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.device.DeviceBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.device.Device"/>
         <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <!-- Geolocation -->
    <replace-with class="de.kurka.phonegap.client.geolocation.GeolocationMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.geolocation.Geolocation"/>
         <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.geolocation.GeolocationBrowserEmptyImpl">
        <when-type-is class="de.kurka.phonegap.client.geolocation.Geolocation"/>
         <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <replace-with class="de.kurka.phonegap.client.log.DebugLoggerMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.log.DebugLogger"/>
    </replace-with>
    
    
    <!-- Network -->
    <replace-with class="de.kurka.phonegap.client.network.NetworkMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.network.Network"/>
         <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.network.NetworkBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.network.Network"/>
         <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <!-- Notification -->
    <replace-with class="de.kurka.phonegap.client.notification.NotificationMobileImpl">
        <when-type-is class="de.kurka.phonegap.client.notification.Notification"/>
         <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.notification.NotificationBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.notification.Notification"/>
         <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
    <!-- File -->
     <replace-with class="de.kurka.phonegap.client.file.browser.FileBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.file.File"/>
         <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    
     <replace-with class="de.kurka.phonegap.client.file.js.FileJsImpl">
        <when-type-is class="de.kurka.phonegap.client.file.File"/>
         <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    
    <!-- Plugins -->
    <!-- Childbrowser -->
    <replace-with class="de.kurka.phonegap.client.plugins.childbrowser.ChildBrowserPhoneGapImpl">
        <when-type-is class="de.kurka.phonegap.client.plugins.childbrowser.ChildBrowser"/>
        <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.plugins.childbrowser.ChildBrowserBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.plugins.childbrowser.ChildBrowser"/>
        <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
    <!-- Badge -->
    <replace-with class="de.kurka.phonegap.client.plugins.badge.BadgePhoneGapImpl">
        <when-type-is class="de.kurka.phonegap.client.plugins.badge.Badge"/>
         <all>
            <when-property-is name="phonegap.env" value="yes"/>
        </all>
    </replace-with>
    <replace-with class="de.kurka.phonegap.client.plugins.badge.BadgeBrowserImpl">
        <when-type-is class="de.kurka.phonegap.client.plugins.badge.Badge"/>
         <all>
            <when-property-is name="phonegap.env" value="no"/>
        </all>
    </replace-with>
   
    
    
    
</module>